[gd_scene load_steps=10 format=3 uid="uid://bq1uivhkbxtb8"]

[ext_resource type="Script" path="res://scripts/Player.gd" id="1_nm7dn"]
[ext_resource type="PackedScene" uid="uid://cqex3gcga2ovp" path="res://3D_models/characters/hooded_character.tscn" id="2_jk2g5"]
[ext_resource type="Shader" path="res://shaders/celshader_pp.gdshader" id="3_3wqq2"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_j7t00"]
radius = 0.277379
height = 2.18201

[sub_resource type="AnimationNodeStateMachinePlayback" id="AnimationNodeStateMachinePlayback_1iq4j"]

[sub_resource type="SeparationRayShape3D" id="SeparationRayShape3D_xx8bg"]
slide_on_slope = true

[sub_resource type="ShaderMaterial" id="ShaderMaterial_yjbfb"]
render_priority = 0
shader = ExtResource("3_3wqq2")
shader_parameter/brightness = 2.0
shader_parameter/contrast_multiplier = 0.1
shader_parameter/l_thresh_multiplier = 0.5
shader_parameter/lightshadow_transition = 0.0
shader_parameter/max_distance = 4000.0
shader_parameter/shadow_tint = Color(0.670588, 0.447059, 0.34902, 1)
shader_parameter/light_tint = Color(0.85098, 0.847059, 0.85098, 1)

[sub_resource type="QuadMesh" id="QuadMesh_t0qij"]
material = SubResource("ShaderMaterial_yjbfb")
size = Vector2(2, 2)

[sub_resource type="SphereShape3D" id="SphereShape3D_x54ob"]
radius = 2.933

[node name="Player" type="CharacterBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.058, 0)
collision_mask = 3
script = ExtResource("1_nm7dn")

[node name="PlayerCollisionCapsule" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.0353781, 0)
shape = SubResource("CapsuleShape3D_j7t00")

[node name="hooded_character" parent="." instance=ExtResource("2_jk2g5")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1.05269, 0)

[node name="Skeleton3D" parent="hooded_character/HoodedCharacterGameRig" index="0"]
bones/0/position = Vector3(0.0417417, 1.09434, -0.0351201)
bones/0/rotation = Quaternion(0.997626, -0.0184351, 0.04209, -0.0512943)
bones/1/position = Vector3(1.50813e-07, 0.063586, 7.50306e-06)
bones/2/position = Vector3(0.20128, -0.928261, 0.180506)
bones/2/rotation = Quaternion(0.16271, 0.659576, 0.715108, -0.164637)
bones/3/rotation = Quaternion(-0.0247007, 0.999515, -0.00368159, 0.018587)
bones/9/position = Vector3(7.83609e-06, 0.201518, -2.98574e-06)
bones/10/rotation = Quaternion(0.721415, 0.174874, 0.665513, 0.0779209)
bones/11/rotation = Quaternion(-1.90506e-07, -0.057905, -3.97598e-07, 0.998322)
bones/12/rotation = Quaternion(1.05286e-07, 0.028921, 2.41266e-07, 0.999582)
bones/13/position = Vector3(-0.0135256, -0.941165, 0.0834192)
bones/13/rotation = Quaternion(-0.183696, 0.635279, 0.743279, 0.101055)
bones/14/rotation = Quaternion(-0.00731867, 0.999661, 0.0244585, 0.00512788)
bones/21/rotation = Quaternion(0.731751, -0.0290373, -0.676248, 0.0799117)
bones/22/rotation = Quaternion(-2.18622e-07, 0.151098, -3.78976e-08, 0.988519)
bones/23/rotation = Quaternion(1.41064e-07, -0.0756729, 6.27579e-08, 0.997133)
bones/24/position = Vector3(0.0417417, 1.09434, -0.0351202)
bones/24/rotation = Quaternion(0.110543, -0.0355757, -0.00372449, 0.993228)
bones/25/position = Vector3(0.0417085, 1.15743, -0.0209045)
bones/25/rotation = Quaternion(-0.00261502, -0.0235197, 0.0185168, 0.999549)
bones/26/position = Vector3(0.0335349, 1.37868, -0.0223719)
bones/26/rotation = Quaternion(0.0177343, -0.0121684, 0.0453073, 0.998742)
bones/27/position = Vector3(-0.110809, 0.0794053, 0.0964309)
bones/28/position = Vector3(-2.7199e-06, 0.0232871, -1.99354e-05)
bones/30/position = Vector3(-1.18158e-06, 0.0232858, -1.76508e-05)
bones/31/rotation = Quaternion(0.537348, 0.39145, 0.653916, -0.361134)
bones/32/rotation = Quaternion(-0.408566, 0.422904, -0.253587, 0.768062)
bones/33/rotation = Quaternion(1.61494e-07, 0.175418, 3.35493e-08, 0.984494)
bones/34/rotation = Quaternion(7.73429e-09, 0.175417, -4.79925e-07, 0.984494)
bones/35/rotation = Quaternion(0.0728607, -0.00211316, -0.0300019, 0.996889)
bones/36/rotation = Quaternion(7.77864e-09, -0.682415, 5.4684e-08, 0.730965)
bones/37/rotation = Quaternion(1.92286e-09, -0.0651364, -4.75061e-08, 0.997876)
bones/38/rotation = Quaternion(0.139597, -0.0267289, -0.105802, 0.984177)
bones/40/rotation = Quaternion(-0.271885, 0.104575, -0.0605964, 0.95471)
bones/41/rotation = Quaternion(-0.216136, 0.0133969, -0.0497917, 0.975001)
bones/42/rotation = Quaternion(-0.0635023, 0.000705001, 0.0270836, 0.997614)
bones/44/rotation = Quaternion(-0.210323, 0.0252349, 0.0280361, 0.976904)
bones/45/rotation = Quaternion(-0.178975, -0.0029082, -0.0451871, 0.982811)
bones/48/rotation = Quaternion(-0.151099, -0.0248261, 0.139303, 0.978339)
bones/49/rotation = Quaternion(-0.182865, -0.00259796, -0.0128057, 0.983051)
bones/52/rotation = Quaternion(-0.179556, -0.119575, 0.251676, 0.943462)
bones/53/rotation = Quaternion(-0.170423, -0.011421, 0.0185222, 0.985131)
bones/55/rotation = Quaternion(-0.0723814, 0.219616, -0.335501, 0.913219)
bones/56/rotation = Quaternion(-0.129892, -0.00208464, 0.113488, 0.98501)
bones/57/rotation = Quaternion(0.0287498, 0.0038321, 0.131949, 0.990832)
bones/58/rotation = Quaternion(-0.54013, 0.399035, 0.629699, 0.390525)
bones/59/rotation = Quaternion(-0.427577, -0.435371, 0.205325, 0.765161)
bones/60/rotation = Quaternion(-2.22642e-08, -0.209468, -1.13404e-07, 0.977816)
bones/61/rotation = Quaternion(6.29807e-08, -0.209468, 3.9653e-08, 0.977816)
bones/62/rotation = Quaternion(0.0856907, 0.00460075, 0.0328474, 0.99577)
bones/63/rotation = Quaternion(6.7844e-08, 0.714897, -1.21998e-08, 0.699229)
bones/64/rotation = Quaternion(-4.92779e-08, 0.110378, -5.02276e-08, 0.99389)
bones/65/rotation = Quaternion(0.230104, 0.0489286, 0.0990097, 0.966879)
bones/67/rotation = Quaternion(-0.231675, -0.0597686, 0.101795, 0.965605)
bones/68/rotation = Quaternion(-0.183441, -0.0058814, 0.0621318, 0.981048)
bones/71/rotation = Quaternion(-0.222769, -0.00773326, -0.00264063, 0.974837)
bones/72/rotation = Quaternion(-0.170019, 0.00434092, 0.0504521, 0.984139)
bones/75/rotation = Quaternion(-0.178534, 0.0210502, -0.132615, 0.974729)
bones/76/rotation = Quaternion(-0.183693, 0.00288338, 0.0143903, 0.982874)
bones/79/rotation = Quaternion(-0.18179, 0.114962, -0.216236, 0.952354)
bones/80/rotation = Quaternion(-0.117617, 0.0114607, -0.012971, 0.992908)
bones/81/rotation = Quaternion(-0.060766, 0.00570369, -0.0140566, 0.998037)
bones/82/rotation = Quaternion(-0.0647364, -0.18902, 0.312991, 0.928503)
bones/83/rotation = Quaternion(-0.159808, 0.0107518, -0.136043, 0.97767)
bones/85/position = Vector3(0.00494353, 1.69478, -0.0262629)
bones/85/rotation = Quaternion(0.109259, -0.00830162, 0.0294604, 0.993542)
bones/86/rotation = Quaternion(-0.090571, -0.001348, -0.00282849, 0.995885)
bones/87/position = Vector3(0.165985, 0.561564, 0.0736433)
bones/87/rotation = Quaternion(0.748066, 0.00575827, 0.662865, -0.0312054)
bones/88/rotation = Quaternion(-4.07986e-08, -0.128103, -1.4955e-08, 0.991761)
bones/89/rotation = Quaternion(0.00688331, 0.744779, -0.0328048, 0.666468)
bones/90/rotation = Quaternion(5.15201e-08, -0.0641883, 3.60119e-08, 0.997938)
bones/91/position = Vector3(-0.0546573, 0.556167, -0.0232604)
bones/91/rotation = Quaternion(0.849305, 0.0559287, -0.524797, -0.011854)
bones/92/rotation = Quaternion(-3.80576e-08, 0.0186816, 3.35773e-08, 0.999825)
bones/93/rotation = Quaternion(-0.00933612, -0.747373, 0.00933463, 0.664274)
bones/94/rotation = Quaternion(-2.03256e-08, 0.00943774, 4.79171e-08, 0.999956)
bones/95/position = Vector3(-0.00141165, 1.80648, -0.0118135)
bones/95/rotation = Quaternion(-0.0611962, -0.00595594, -0.0152921, 0.997991)
bones/105/position = Vector3(0.0132175, 0.0235559, 2.24998e-06)
bones/106/position = Vector3(0.0308701, 0.00955862, 1.20626e-06)
bones/107/position = Vector3(0.0108748, 3.12129e-05, -3.18396e-06)
bones/109/position = Vector3(0.0311428, 0.00909485, 6.10541e-06)
bones/110/position = Vector3(0.0690974, 0.0731206, -0.0312506)
bones/110/rotation = Quaternion(0.707155, -9.20659e-06, 0.707059, 1.33932e-07)
bones/111/position = Vector3(0.0690992, 0.0731171, 0.0312699)
bones/111/rotation = Quaternion(0.707164, 1.10613e-06, 0.70705, 4.47521e-07)
bones/112/position = Vector3(0.0266825, 0.0630178, 4.3263e-06)
bones/113/position = Vector3(0.000324148, 0.00025537, 2.02378e-06)

[node name="RightHandAttachment" type="BoneAttachment3D" parent="hooded_character/HoodedCharacterGameRig/Skeleton3D" index="1"]
transform = Transform3D(-0.0662698, -0.425034, -0.902748, -0.216526, -0.877052, 0.42883, -0.974025, 0.223887, -0.0339091, -0.216048, 0.922209, -0.0586884)
bone_name = "hand.r"
bone_idx = 65

[node name="WeaponSlot" type="Node3D" parent="hooded_character/HoodedCharacterGameRig/Skeleton3D/RightHandAttachment"]
transform = Transform3D(-0.0457613, -0.99403, 0.0990571, 0.894667, 0.00332996, 0.446723, -0.444386, 0.109067, 0.889172, 0.0112015, 0.08489, -0.0213568)

[node name="VanishTimer" type="Timer" parent="hooded_character/HoodedCharacterGameRig/Skeleton3D/RightHandAttachment"]
one_shot = true

[node name="AnimationTree" parent="hooded_character" index="2"]
parameters/IdleWalkRun/blend_position = 0.0
parameters/StateMachine/playback = SubResource("AnimationNodeStateMachinePlayback_1iq4j")

[node name="SpringArm3D" type="SpringArm3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.966475, 0.256762, 0, -0.256762, 0.966475, 0, 0, 0)
shape = SubResource("SeparationRayShape3D_xx8bg")
spring_length = 8.0

[node name="PlayerCam" type="Camera3D" parent="SpringArm3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 8)
cull_mask = 524287
fov = 60.0

[node name="PostProcessSpatial" type="Node3D" parent="SpringArm3D/PlayerCam"]

[node name="Shader" type="MeshInstance3D" parent="SpringArm3D/PlayerCam/PostProcessSpatial"]
transform = Transform3D(1, 0, 0, 0, 0.999977, -0.00657991, 0, 0.00657991, 0.999977, 0, 0.0663377, -3.38526)
cast_shadow = 0
extra_cull_margin = 16384.0
ignore_occlusion_culling = true
mesh = SubResource("QuadMesh_t0qij")
skeleton = NodePath("../..")

[node name="OverlapArea" type="Area3D" parent="."]
collision_layer = 2
collision_mask = 2

[node name="OverlapShape" type="CollisionShape3D" parent="OverlapArea"]
shape = SubResource("SphereShape3D_x54ob")

[connection signal="timeout" from="hooded_character/HoodedCharacterGameRig/Skeleton3D/RightHandAttachment/VanishTimer" to="." method="_on_vanish_timer_timeout"]
[connection signal="area_shape_entered" from="OverlapArea" to="." method="_on_overlap_area_area_shape_entered"]
[connection signal="area_shape_exited" from="OverlapArea" to="." method="_on_overlap_area_area_shape_exited"]

[editable path="hooded_character"]
