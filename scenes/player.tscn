[gd_scene load_steps=10 format=3 uid="uid://bueuj0ghwdj2c"]

[ext_resource type="Script" path="res://scripts/Player.gd" id="1_nm7dn"]
[ext_resource type="Shader" path="res://shaders/celshader_pp1.gdshader" id="3_owgoy"]
[ext_resource type="PackedScene" uid="uid://chyx0ysg0ih0p" path="res://3D_models/characters/wielder1/starblade_wielder.tscn" id="3_qh5ue"]

[sub_resource type="AnimationNodeStateMachinePlayback" id="AnimationNodeStateMachinePlayback_jffoc"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_j7t00"]
radius = 0.233368
height = 1.9079

[sub_resource type="SeparationRayShape3D" id="SeparationRayShape3D_xx8bg"]
slide_on_slope = true

[sub_resource type="ShaderMaterial" id="ShaderMaterial_yjbfb"]
render_priority = 0
shader = ExtResource("3_owgoy")
shader_parameter/brightness = 1.3
shader_parameter/contrast_multiplier = 0.4
shader_parameter/l_thresh_multiplier = 0.5
shader_parameter/lightshadow_transition = 0.0
shader_parameter/max_distance = 4000.0
shader_parameter/shadow_tint = Color(0.537255, 0.6, 0.709804, 1)
shader_parameter/light_tint = Color(0.831373, 0.831373, 0.831373, 1)

[sub_resource type="QuadMesh" id="QuadMesh_t0qij"]
material = SubResource("ShaderMaterial_yjbfb")
size = Vector2(2, 2)

[sub_resource type="SphereShape3D" id="SphereShape3D_x54ob"]
radius = 6.16279

[node name="Player" type="CharacterBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.058, 0)
collision_mask = 3
script = ExtResource("1_nm7dn")

[node name="starblade_wielder" parent="." instance=ExtResource("3_qh5ue")]
transform = Transform3D(-1, 0, -1.50996e-07, 0, 1, 0, 1.50996e-07, 0, -1, 0, -1.05, 0)

[node name="Skeleton3D" parent="starblade_wielder/Armature" index="0"]
bones/1/position = Vector3(0.0100861, 0.0388075, 0.827435)
bones/1/rotation = Quaternion(0.789621, -0.0487215, -0.00290941, 0.611651)
bones/2/rotation = Quaternion(-0.104218, 0.0352065, -0.0349748, 0.993316)
bones/3/rotation = Quaternion(-0.0528155, -4.68688e-05, -0.00192421, 0.998602)
bones/4/rotation = Quaternion(0.0123373, 4.47431e-05, -0.00112079, 0.999923)
bones/6/rotation = Quaternion(-0.185715, 0.000654857, 0.00779584, 0.982572)
bones/63/rotation = Quaternion(-0.590811, 0.227828, -0.111147, 0.765953)
bones/64/rotation = Quaternion(-0.0562845, 0.0906954, -0.238575, 0.96524)
bones/65/rotation = Quaternion(0.105415, -0.0538379, 0.132897, 0.984036)
bones/66/position = Vector3(-0.0289085, 0.233559, 0.00145042)
bones/66/rotation = Quaternion(-0.00287461, -0.18513, 0.156025, 0.970245)
bones/70/position = Vector3(-0.0163887, 0.241041, 0.0113006)
bones/70/rotation = Quaternion(-0.00250559, -0.121664, 0.141077, 0.982491)
bones/74/position = Vector3(-0.00146263, 0.246225, 0.0152431)
bones/74/rotation = Quaternion(0.0366444, -0.0978038, 0.123499, 0.986833)
bones/78/position = Vector3(0.0118605, 0.247681, 0.0153651)
bones/78/rotation = Quaternion(0.048229, 0.0151658, 0.0601695, 0.996907)
bones/82/position = Vector3(0.0207991, 0.226997, -0.000262256)
bones/82/rotation = Quaternion(0.186606, 0.757974, -0.222934, 0.583913)
bones/86/rotation = Quaternion(-0.596584, -0.198183, 0.13683, 0.765564)
bones/87/rotation = Quaternion(-0.0562701, -0.0825239, 0.189448, 0.976797)
bones/88/rotation = Quaternion(0.0784209, 0.0562368, -0.0781867, 0.992257)
bones/89/position = Vector3(0.0259753, 0.236327, -0.000405884)
bones/89/rotation = Quaternion(-0.03676, 0.180591, -0.105252, 0.977219)
bones/93/position = Vector3(0.0128916, 0.243057, 0.00910033)
bones/93/rotation = Quaternion(-0.0330971, 0.117625, -0.0881052, 0.988588)
bones/97/position = Vector3(-0.00237436, 0.246961, 0.0129745)
bones/97/rotation = Quaternion(0.00722041, 0.0964509, -0.0697285, 0.992866)
bones/101/position = Vector3(-0.01564, 0.247129, 0.0133569)
bones/101/rotation = Quaternion(0.0249211, -0.0141206, -0.00321519, 0.999585)
bones/105/position = Vector3(-0.0223679, 0.22534, -0.000993859)
bones/105/rotation = Quaternion(0.215012, -0.740732, 0.273947, 0.57449)
bones/108/rotation = Quaternion(0.0242863, 0.177589, 0.983775, -0.00772898)
bones/109/rotation = Quaternion(-0.00220045, -0.000448306, -0.0185212, 0.999826)
bones/110/rotation = Quaternion(0.477258, -0.153216, 0.0973659, 0.859808)
bones/111/rotation = Quaternion(0.198628, 0.000956161, -0.0696246, 0.977598)
bones/112/rotation = Quaternion(0.0374329, 0.119416, 0.989864, 0.067136)
bones/113/rotation = Quaternion(-0.079906, -0.00099267, 0.0185, 0.99663)
bones/114/rotation = Quaternion(0.598453, 0.107967, -0.0488122, 0.792347)
bones/115/rotation = Quaternion(0.197987, -0.0010018, 0.069624, 0.977728)

[node name="LeftHandAttachment" parent="starblade_wielder/Armature/Skeleton3D" index="3"]
transform = Transform3D(-0.245639, 0.246214, 0.937571, -0.0264304, -0.968547, 0.247424, 0.969001, 0.0359967, 0.244421, 0.25673, 0.926992, -0.0383279)

[node name="Wielder1_Sword2" parent="starblade_wielder/Armature/Skeleton3D/LeftHandAttachment/WeaponSlotLeftHand" index="0"]
visible = true

[node name="AnimationTree" parent="starblade_wielder" index="2"]
parameters/IdleWalkRun_Jump/playback = SubResource("AnimationNodeStateMachinePlayback_jffoc")

[node name="PlayerCollisionCapsule" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.0946493, 0)
shape = SubResource("CapsuleShape3D_j7t00")

[node name="SpringArm3D" type="SpringArm3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.966475, 0.256762, 0, -0.256762, 0.966475, 0, 0.372398, 0)
shape = SubResource("SeparationRayShape3D_xx8bg")
spring_length = 4.0

[node name="PlayerCam" type="Camera3D" parent="SpringArm3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.00170732, 5.00357)
cull_mask = 524287
fov = 60.0

[node name="PostProcessSpatial" type="Node3D" parent="SpringArm3D/PlayerCam"]
visible = false

[node name="Shader" type="MeshInstance3D" parent="SpringArm3D/PlayerCam/PostProcessSpatial"]
transform = Transform3D(1, 0, 0, 0, 0.999914, -0.0128977, 0, 0.0128977, 0.999914, 0, 0.0188149, -0.510084)
cast_shadow = 0
extra_cull_margin = 16384.0
ignore_occlusion_culling = true
mesh = SubResource("QuadMesh_t0qij")
skeleton = NodePath("../..")

[node name="OverlapArea" type="Area3D" parent="."]
collision_layer = 2
collision_mask = 2

[node name="OverlapShape" type="CollisionShape3D" parent="OverlapArea"]
shape = SubResource("SphereShape3D_x54ob")

[connection signal="timeout" from="starblade_wielder/Armature/Skeleton3D/LeftHandAttachment/VanishTimer" to="." method="_on_vanish_timer_timeout"]
[connection signal="animation_finished" from="starblade_wielder/AnimationTree" to="." method="_on_animation_tree_animation_finished"]
[connection signal="area_shape_entered" from="OverlapArea" to="." method="_on_overlap_area_area_shape_entered"]
[connection signal="area_shape_exited" from="OverlapArea" to="." method="_on_overlap_area_area_shape_exited"]

[editable path="starblade_wielder"]
