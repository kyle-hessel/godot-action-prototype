[gd_scene load_steps=10 format=3 uid="uid://bq1uivhkbxtb8"]

[ext_resource type="Script" path="res://scripts/Player.gd" id="1_nm7dn"]
[ext_resource type="PackedScene" uid="uid://cqex3gcga2ovp" path="res://3D_models/characters/hooded_character.tscn" id="2_jk2g5"]
[ext_resource type="Shader" path="res://shaders/celshader_pp.gdshader" id="3_3wqq2"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_j7t00"]
radius = 0.277379
height = 2.18201

[sub_resource type="AnimationNodeStateMachinePlayback" id="AnimationNodeStateMachinePlayback_1iq4j"]

[sub_resource type="SeparationRayShape3D" id="SeparationRayShape3D_xx8bg"]
slide_on_slope = true

[sub_resource type="ShaderMaterial" id="ShaderMaterial_yjbfb"]
render_priority = 0
shader = ExtResource("3_3wqq2")
shader_parameter/brightness = 2.0
shader_parameter/contrast_multiplier = 0.1
shader_parameter/l_thresh_multiplier = 0.5
shader_parameter/lightshadow_transition = 0.0
shader_parameter/max_distance = 4000.0
shader_parameter/shadow_tint = Color(0.670588, 0.447059, 0.34902, 1)
shader_parameter/light_tint = Color(0.85098, 0.847059, 0.85098, 1)

[sub_resource type="QuadMesh" id="QuadMesh_t0qij"]
material = SubResource("ShaderMaterial_yjbfb")
size = Vector2(2, 2)

[sub_resource type="SphereShape3D" id="SphereShape3D_x54ob"]
radius = 2.933

[node name="Player" type="CharacterBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.058, 0)
collision_mask = 3
script = ExtResource("1_nm7dn")

[node name="PlayerCollisionCapsule" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.0353781, 0)
shape = SubResource("CapsuleShape3D_j7t00")

[node name="hooded_character" parent="." instance=ExtResource("2_jk2g5")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1.05269, 0)

[node name="Skeleton3D" parent="hooded_character/HoodedCharacterGameRig" index="0"]
bones/0/position = Vector3(0.0441341, 1.09433, -0.0354684)
bones/0/rotation = Quaternion(0.997406, -0.0211738, 0.0471603, -0.0500986)
bones/1/position = Vector3(1.50813e-07, 0.063586, 7.50306e-06)
bones/2/position = Vector3(0.204726, -0.927882, 0.175623)
bones/2/rotation = Quaternion(0.164242, 0.658323, 0.714664, -0.169972)
bones/3/rotation = Quaternion(-0.024721, 0.999516, -0.00268216, 0.0186768)
bones/9/position = Vector3(7.83609e-06, 0.201518, -2.98574e-06)
bones/10/rotation = Quaternion(0.721251, 0.177022, 0.665209, 0.0771838)
bones/11/rotation = Quaternion(-2.7981e-07, -0.0548687, -2.5624e-07, 0.998494)
bones/12/rotation = Quaternion(5.38485e-08, 0.0273966, 3.47156e-07, 0.999625)
bones/13/position = Vector3(-0.0111196, -0.941508, 0.0808524)
bones/13/rotation = Quaternion(-0.18109, 0.634422, 0.74531, 0.096059)
bones/14/rotation = Quaternion(-0.00731867, 0.999661, 0.0244585, 0.00512788)
bones/21/rotation = Quaternion(0.731916, -0.0239564, -0.676519, 0.0777642)
bones/22/rotation = Quaternion(-2.1307e-07, 0.156316, -3.05815e-08, 0.987707)
bones/23/rotation = Quaternion(4.69105e-08, -0.0783995, 5.13755e-08, 0.996922)
bones/24/position = Vector3(0.0441341, 1.09433, -0.0354684)
bones/24/rotation = Quaternion(0.107805, -0.0427778, -0.00550307, 0.993236)
bones/25/position = Vector3(0.0441836, 1.15746, -0.0214689)
bones/25/rotation = Quaternion(-0.00860627, -0.0341977, 0.016511, 0.999242)
bones/26/position = Vector3(0.0377894, 1.3787, -0.0246806)
bones/26/rotation = Quaternion(0.00855737, -0.0268172, 0.0441427, 0.998629)
bones/27/position = Vector3(-0.110809, 0.0794053, 0.0964309)
bones/28/position = Vector3(-2.7199e-06, 0.0232871, -1.99354e-05)
bones/30/position = Vector3(-1.18158e-06, 0.0232858, -1.76508e-05)
bones/31/rotation = Quaternion(0.536327, 0.391508, 0.655726, -0.359303)
bones/32/rotation = Quaternion(-0.42199, 0.432851, -0.216953, 0.766483)
bones/33/rotation = Quaternion(1.29574e-07, 0.180232, -8.53337e-08, 0.983624)
bones/34/rotation = Quaternion(2.83146e-08, 0.180231, -5.20584e-07, 0.983624)
bones/35/rotation = Quaternion(0.142116, 0.00567954, -0.0434676, 0.988879)
bones/36/rotation = Quaternion(8.47309e-08, -0.680894, -5.98967e-08, 0.732382)
bones/37/rotation = Quaternion(2.39229e-09, -0.0630626, 1.2545e-08, 0.99801)
bones/38/rotation = Quaternion(0.150731, -0.022952, -0.0639495, 0.986237)
bones/40/rotation = Quaternion(-0.272644, 0.104675, -0.0606856, 0.954477)
bones/41/rotation = Quaternion(-0.216903, 0.0134713, -0.0499363, 0.974822)
bones/42/rotation = Quaternion(-0.0635023, 0.000705001, 0.0270836, 0.997614)
bones/44/rotation = Quaternion(-0.21103, 0.025247, 0.0279646, 0.976753)
bones/45/rotation = Quaternion(-0.179685, -0.00289024, -0.0452592, 0.982678)
bones/48/rotation = Quaternion(-0.151555, -0.0248823, 0.139259, 0.978273)
bones/49/rotation = Quaternion(-0.183258, -0.00258882, -0.0128282, 0.982978)
bones/52/rotation = Quaternion(-0.180024, -0.119698, 0.251651, 0.943364)
bones/53/rotation = Quaternion(-0.170905, -0.0114529, 0.0185545, 0.985046)
bones/55/rotation = Quaternion(-0.0723814, 0.219616, -0.335501, 0.913219)
bones/56/rotation = Quaternion(-0.129892, -0.00208464, 0.113488, 0.98501)
bones/57/rotation = Quaternion(0.0287498, 0.0038321, 0.131949, 0.990832)
bones/58/rotation = Quaternion(-0.546414, 0.39462, 0.625264, 0.393385)
bones/59/rotation = Quaternion(-0.431473, -0.450024, 0.160762, 0.765157)
bones/60/rotation = Quaternion(-1.00487e-07, -0.216789, -1.42407e-07, 0.976219)
bones/61/rotation = Quaternion(9.84031e-08, -0.216789, -1.06244e-07, 0.976218)
bones/62/rotation = Quaternion(0.162494, -0.00748494, 0.0473673, 0.985544)
bones/63/rotation = Quaternion(-8.27458e-09, 0.720289, 4.46817e-08, 0.693674)
bones/64/rotation = Quaternion(2.68128e-08, 0.118069, -4.38368e-09, 0.993005)
bones/65/rotation = Quaternion(0.246563, 0.0436255, 0.0630906, 0.966086)
bones/67/rotation = Quaternion(-0.27231, -0.066346, 0.100049, 0.954692)
bones/68/rotation = Quaternion(-0.223978, -0.0105602, 0.0668048, 0.972245)
bones/71/rotation = Quaternion(-0.246764, -0.00890628, -0.000624908, 0.969035)
bones/72/rotation = Quaternion(-0.194345, 0.00360211, 0.0520708, 0.979544)
bones/75/rotation = Quaternion(-0.190829, 0.0225262, -0.131279, 0.972545)
bones/76/rotation = Quaternion(-0.196072, 0.00256623, 0.015265, 0.980467)
bones/79/rotation = Quaternion(-0.186619, 0.116303, -0.215875, 0.951339)
bones/80/rotation = Quaternion(-0.122695, 0.0117714, -0.013191, 0.992287)
bones/81/rotation = Quaternion(-0.060766, 0.00570369, -0.0140566, 0.998037)
bones/82/rotation = Quaternion(-0.0647364, -0.18902, 0.312991, 0.928503)
bones/83/rotation = Quaternion(-0.159808, 0.0107518, -0.136043, 0.97767)
bones/85/position = Vector3(0.0104627, 1.69477, -0.0348135)
bones/85/rotation = Quaternion(0.100315, -0.0231062, 0.0296816, 0.994244)
bones/86/rotation = Quaternion(-0.0944051, -0.00343723, 0.00664423, 0.995506)
bones/87/position = Vector3(0.166534, 0.561409, 0.0775825)
bones/87/rotation = Quaternion(0.74292, 0.00235443, 0.668513, -0.033989)
bones/88/rotation = Quaternion(-5.218e-10, -0.135217, 7.66411e-09, 0.990816)
bones/89/rotation = Quaternion(0.00688331, 0.744779, -0.0328048, 0.666468)
bones/90/rotation = Quaternion(-2.36872e-09, -0.0678415, 3.18179e-08, 0.997696)
bones/91/position = Vector3(-0.0527652, 0.556561, -0.0258081)
bones/91/rotation = Quaternion(0.854914, 0.0524746, -0.515989, -0.0111399)
bones/92/rotation = Quaternion(-3.83652e-08, 0.00801827, 4.45497e-08, 0.999968)
bones/93/rotation = Quaternion(-0.00933612, -0.747373, 0.00933463, 0.664274)
bones/94/rotation = Quaternion(3.20299e-06, 0.00401647, -7.28746e-06, 0.999992)
bones/95/position = Vector3(0.00304351, 1.80665, -0.023059)
bones/95/rotation = Quaternion(-0.0813453, -0.0243981, -0.0171987, 0.996239)
bones/105/position = Vector3(0.0132175, 0.0235559, 2.24998e-06)
bones/106/position = Vector3(0.0308701, 0.00955862, 1.20626e-06)
bones/107/position = Vector3(0.0108748, 3.12129e-05, -3.18396e-06)
bones/109/position = Vector3(0.0311428, 0.00909485, 6.10541e-06)
bones/110/position = Vector3(0.0690974, 0.0731206, -0.0312506)
bones/110/rotation = Quaternion(0.707155, -9.21475e-06, 0.707059, 1.21863e-07)
bones/111/position = Vector3(0.0690992, 0.0731171, 0.0312699)
bones/111/rotation = Quaternion(0.707164, 1.10613e-06, 0.70705, 4.47521e-07)
bones/112/position = Vector3(0.0266825, 0.0630178, 4.3263e-06)
bones/113/position = Vector3(0.000324148, 0.00025537, 2.02378e-06)

[node name="RightHandAttachment" type="BoneAttachment3D" parent="hooded_character/HoodedCharacterGameRig/Skeleton3D" index="1"]
transform = Transform3D(-0.0125158, -0.431238, -0.902151, -0.211188, -0.880729, 0.423928, -0.977365, 0.195829, -0.0800495, -0.20818, 0.928617, -0.073)
bone_name = "hand.r"
bone_idx = 65

[node name="WeaponSlot" type="Node3D" parent="hooded_character/HoodedCharacterGameRig/Skeleton3D/RightHandAttachment"]
transform = Transform3D(-0.0457613, -0.99403, 0.0990571, 0.894667, 0.00332996, 0.446723, -0.444386, 0.109067, 0.889172, 0.0112015, 0.08489, -0.0213568)

[node name="VanishTimer" type="Timer" parent="hooded_character/HoodedCharacterGameRig/Skeleton3D/RightHandAttachment"]
one_shot = true

[node name="AnimationTree" parent="hooded_character" index="2"]
parameters/IdleWalkRun/blend_position = 0.0
parameters/StateMachine/playback = SubResource("AnimationNodeStateMachinePlayback_1iq4j")

[node name="SpringArm3D" type="SpringArm3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.966475, 0.256762, 0, -0.256762, 0.966475, 0, 0, 0)
shape = SubResource("SeparationRayShape3D_xx8bg")
spring_length = 8.0

[node name="PlayerCam" type="Camera3D" parent="SpringArm3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 8)
cull_mask = 524287
fov = 60.0

[node name="PostProcessSpatial" type="Node3D" parent="SpringArm3D/PlayerCam"]

[node name="Shader" type="MeshInstance3D" parent="SpringArm3D/PlayerCam/PostProcessSpatial"]
transform = Transform3D(1, 0, 0, 0, 0.999977, -0.00657991, 0, 0.00657991, 0.999977, 0, 0.0663377, -3.38526)
cast_shadow = 0
extra_cull_margin = 16384.0
ignore_occlusion_culling = true
mesh = SubResource("QuadMesh_t0qij")
skeleton = NodePath("../..")

[node name="OverlapArea" type="Area3D" parent="."]
collision_layer = 2
collision_mask = 2

[node name="OverlapShape" type="CollisionShape3D" parent="OverlapArea"]
shape = SubResource("SphereShape3D_x54ob")

[connection signal="timeout" from="hooded_character/HoodedCharacterGameRig/Skeleton3D/RightHandAttachment/VanishTimer" to="." method="_on_vanish_timer_timeout"]
[connection signal="area_shape_entered" from="OverlapArea" to="." method="_on_overlap_area_area_shape_entered"]
[connection signal="area_shape_exited" from="OverlapArea" to="." method="_on_overlap_area_area_shape_exited"]

[editable path="hooded_character"]
