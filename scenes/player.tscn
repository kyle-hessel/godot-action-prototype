[gd_scene load_steps=17 format=3 uid="uid://cc7svareltvw7"]

[ext_resource type="Script" path="res://scripts/Player.gd" id="1_nm7dn"]
[ext_resource type="Script" path="res://scripts/trail_3d.gd" id="3_fhqoo"]
[ext_resource type="Shader" path="res://shaders/celshader_pp1.gdshader" id="3_owgoy"]
[ext_resource type="PackedScene" uid="uid://lqiyliktxd23" path="res://3D_models/characters/wielder1/starblade_wielder.tscn" id="3_qh5ue"]
[ext_resource type="Texture2D" uid="uid://c0k8c5wncmt3g" path="res://UI/Target_Reticle.png" id="4_26cl0"]
[ext_resource type="AnimationLibrary" uid="uid://2jaqftss00pd" path="res://Animations/Wielder_Anims_03_11_23.res" id="4_np4pt"]
[ext_resource type="AnimationLibrary" uid="uid://cnlqrfubu6xh0" path="res://Animations/extra_anims.tres" id="5_qj00n"]

[sub_resource type="Gradient" id="Gradient_aqni0"]
offsets = PackedFloat32Array(0, 0.99495)
colors = PackedColorArray(0.619608, 0.168627, 0.592157, 1, 0.152941, 0.27451, 0.631373, 0.666667)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_8ki4i"]
gradient = SubResource("Gradient_aqni0")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_amect"]
transparency = 1
blend_mode = 1
cull_mode = 2
shading_mode = 0
albedo_color = Color(0.619608, 0.168627, 0.592157, 1)
albedo_texture = SubResource("GradientTexture2D_8ki4i")

[sub_resource type="BoxShape3D" id="BoxShape3D_j0pih"]
size = Vector3(0.448616, 1.12427, 0.885681)

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_j7t00"]
radius = 0.25
height = 1.9079

[sub_resource type="SeparationRayShape3D" id="SeparationRayShape3D_xx8bg"]
slide_on_slope = true

[sub_resource type="ShaderMaterial" id="ShaderMaterial_yjbfb"]
render_priority = 0
shader = ExtResource("3_owgoy")
shader_parameter/brightness = 1.3
shader_parameter/contrast_multiplier = 0.4
shader_parameter/l_thresh_multiplier = 0.5
shader_parameter/lightshadow_transition = 0.0
shader_parameter/max_distance = 4000.0
shader_parameter/shadow_tint = Color(0.537255, 0.6, 0.709804, 1)
shader_parameter/light_tint = Color(0.831373, 0.831373, 0.831373, 1)

[sub_resource type="QuadMesh" id="QuadMesh_t0qij"]
material = SubResource("ShaderMaterial_yjbfb")
size = Vector2(2, 2)

[sub_resource type="SphereShape3D" id="SphereShape3D_x54ob"]
radius = 13.1285

[node name="Player" type="CharacterBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.058, 0)
collision_layer = 4
collision_mask = 5
script = ExtResource("1_nm7dn")

[node name="starblade_wielder" parent="." instance=ExtResource("3_qh5ue")]
transform = Transform3D(-1, 0, -1.50996e-07, 0, 1, 0, 1.50996e-07, 0, -1, 0, -1.05, 0)

[node name="Skeleton3D" parent="starblade_wielder/Armature" index="0"]
bones/1/position = Vector3(-0.00865185, 0.0391932, 0.827436)
bones/1/rotation = Quaternion(0.790637, 0.0274462, -0.0130637, 0.611531)
bones/2/rotation = Quaternion(-0.104952, -0.00902074, 0.0309964, 0.993953)
bones/3/rotation = Quaternion(-0.0528155, 3.38488e-05, 0.00138969, 0.998603)
bones/4/rotation = Quaternion(0.0123369, 8.76525e-05, -0.00152503, 0.999923)
bones/5/rotation = Quaternion(0.19908, -1.36702e-10, -4.81676e-08, 0.979983)
bones/6/rotation = Quaternion(-0.184811, -0.0323078, 0.00820835, 0.982209)
bones/7/rotation = Quaternion(-0.707107, 0, 1.68587e-07, 0.707107)
bones/8/rotation = Quaternion(-0.707107, 1.30035e-08, 1.81591e-07, 0.707107)
bones/9/rotation = Quaternion(-0.707107, 1.81591e-07, 1.30036e-08, 0.707107)
bones/10/rotation = Quaternion(-0.707107, 1.30035e-08, 1.81591e-07, 0.707107)
bones/11/rotation = Quaternion(-0.707107, 1.81591e-07, 1.30035e-08, 0.707107)
bones/12/rotation = Quaternion(-0.707107, 0, 1.68587e-07, 0.707107)
bones/13/rotation = Quaternion(-0.707107, 1.30035e-08, 1.81591e-07, 0.707107)
bones/14/rotation = Quaternion(-0.707107, 1.81591e-07, 1.30036e-08, 0.707107)
bones/27/rotation = Quaternion(-0.707107, -1.9429e-08, 1.49158e-07, 0.707107)
bones/28/rotation = Quaternion(-0.707107, 1.49158e-07, -1.9429e-08, 0.707107)
bones/29/rotation = Quaternion(-0.707107, -1.9429e-08, 1.49158e-07, 0.707107)
bones/30/rotation = Quaternion(-0.707107, 1.49158e-07, -1.9429e-08, 0.707107)
bones/31/rotation = Quaternion(-0.707107, -1.9429e-08, 1.49158e-07, 0.707107)
bones/32/rotation = Quaternion(-0.707107, 1.49158e-07, -1.9429e-08, 0.707107)
bones/33/rotation = Quaternion(-0.707107, -1.9429e-08, 1.49158e-07, 0.707107)
bones/34/rotation = Quaternion(-0.707107, 1.49158e-07, -1.9429e-08, 0.707107)
bones/35/rotation = Quaternion(-0.707107, 1.30033e-08, 1.81591e-07, 0.707107)
bones/36/rotation = Quaternion(-0.707107, 1.81591e-07, 1.30033e-08, 0.707107)
bones/37/rotation = Quaternion(-0.707107, 1.30033e-08, 1.81591e-07, 0.707107)
bones/38/rotation = Quaternion(-0.707107, 1.81591e-07, 1.30033e-08, 0.707107)
bones/39/rotation = Quaternion(-0.707107, -1.9429e-08, 1.49158e-07, 0.707107)
bones/40/rotation = Quaternion(-0.707107, 1.49158e-07, -1.9429e-08, 0.707107)
bones/41/rotation = Quaternion(-0.707107, -1.9429e-08, 1.49158e-07, 0.707107)
bones/42/rotation = Quaternion(-0.707107, 1.49158e-07, -1.9429e-08, 0.707107)
bones/47/rotation = Quaternion(0.874997, -2.88563e-07, -7.30155e-07, 0.484127)
bones/55/rotation = Quaternion(-0.702633, 4.9929e-15, 1.67521e-07, 0.711553)
bones/57/rotation = Quaternion(-2.5686e-07, 0.805175, 0.593037, -5.40711e-07)
bones/60/rotation = Quaternion(8.56631e-08, 0.707107, 0.707107, -5.33851e-08)
bones/61/rotation = Quaternion(8.5663e-08, 0.707107, 0.707107, -5.33851e-08)
bones/62/rotation = Quaternion(-0.558006, -0.396578, -0.434198, 0.585515)
bones/63/rotation = Quaternion(-0.594781, 0.207297, -0.130172, 0.765715)
bones/64/rotation = Quaternion(-0.0433209, 0.146392, -0.209638, 0.965787)
bones/65/rotation = Quaternion(0.156838, 0.0187906, 0.11935, 0.980206)
bones/66/position = Vector3(-0.0281731, 0.233127, 0.0079463)
bones/66/rotation = Quaternion(0.049932, -0.113779, 0.145503, 0.981524)
bones/67/rotation = Quaternion(-0.15356, 0.0825944, -0.0114511, 0.984615)
bones/68/rotation = Quaternion(-0.218602, -0.00931787, -0.0427931, 0.974831)
bones/69/rotation = Quaternion(-0.172323, -0.00485557, -0.000885318, 0.985028)
bones/70/position = Vector3(-0.0143727, 0.239896, 0.0163232)
bones/70/rotation = Quaternion(0.0497692, -0.0489783, 0.13323, 0.988622)
bones/71/rotation = Quaternion(-0.144877, 0.0151114, -0.00101832, 0.989334)
bones/72/rotation = Quaternion(-0.211228, -0.012712, 0.00491038, 0.977342)
bones/73/rotation = Quaternion(-0.187758, 0.0029191, -0.00170133, 0.98221)
bones/74/position = Vector3(0.000985793, 0.244816, 0.0184177)
bones/74/rotation = Quaternion(0.0876115, -0.0242141, 0.113602, 0.98936)
bones/75/rotation = Quaternion(-0.169953, 0.00963474, 0.00962228, 0.985358)
bones/76/rotation = Quaternion(-0.193672, -0.013238, 0.00970459, 0.980929)
bones/77/rotation = Quaternion(-0.180202, -0.0132706, 0.00961211, 0.983493)
bones/78/position = Vector3(0.0142208, 0.246306, 0.0168353)
bones/78/rotation = Quaternion(0.0947992, 0.0917273, 0.0543427, 0.989771)
bones/79/rotation = Quaternion(-0.143893, -0.0637013, 0.0530934, 0.986113)
bones/80/rotation = Quaternion(-0.217059, 0.00304708, 0.0172261, 0.976002)
bones/81/rotation = Quaternion(-0.198062, -0.0134758, -0.0156026, 0.979973)
bones/82/position = Vector3(0.0206357, 0.227027, -0.00151188)
bones/82/rotation = Quaternion(0.194507, 0.810261, -0.206374, 0.512888)
bones/83/rotation = Quaternion(-0.253237, 0.0381079, -0.0260387, 0.966303)
bones/84/rotation = Quaternion(-0.0693489, 0.0215806, -0.017954, 0.997197)
bones/85/rotation = Quaternion(-0.558143, 0.396382, 0.434389, 0.585375)
bones/86/rotation = Quaternion(-0.5987, -0.225513, 0.119595, 0.75921)
bones/87/rotation = Quaternion(-0.0562308, -0.0902258, 0.232649, 0.966733)
bones/88/rotation = Quaternion(0.0774644, 0.0742709, -0.166811, 0.980131)
bones/89/position = Vector3(0.0306391, 0.231629, -0.00201694)
bones/89/rotation = Quaternion(-0.0270052, 0.207695, -0.189945, 0.959195)
bones/90/rotation = Quaternion(-0.15356, -0.0825943, 0.0114512, 0.984615)
bones/91/rotation = Quaternion(-0.218602, 0.00931789, 0.0427932, 0.974831)
bones/92/rotation = Quaternion(-0.172323, 0.00485557, 0.000885335, 0.985028)
bones/93/position = Vector3(0.0193425, 0.240439, 0.00805745)
bones/93/rotation = Quaternion(-0.0284637, 0.145023, -0.173732, 0.97364)
bones/94/rotation = Quaternion(-0.144877, -0.0151114, 0.00101833, 0.989334)
bones/95/rotation = Quaternion(-0.211228, 0.012712, -0.00491034, 0.977342)
bones/96/rotation = Quaternion(-0.187758, -0.00291909, 0.00170134, 0.98221)
bones/97/position = Vector3(0.00507805, 0.24682, 0.0126482)
bones/97/rotation = Quaternion(0.0102902, 0.120587, -0.156762, 0.980193)
bones/98/rotation = Quaternion(-0.169953, -0.00963477, -0.00962229, 0.985358)
bones/99/rotation = Quaternion(-0.193672, 0.013238, -0.00970453, 0.980929)
bones/100/rotation = Quaternion(-0.180202, 0.0132706, -0.00961213, 0.983493)
bones/101/position = Vector3(-0.00810314, 0.249125, 0.0136819)
bones/101/rotation = Quaternion(0.01993, 0.00933869, -0.0911717, 0.995592)
bones/102/rotation = Quaternion(-0.143893, 0.0637013, -0.0530934, 0.986113)
bones/103/rotation = Quaternion(-0.217059, -0.00304706, -0.0172261, 0.976002)
bones/104/rotation = Quaternion(-0.198062, 0.0134758, 0.0156026, 0.979973)
bones/105/position = Vector3(-0.0193561, 0.228311, -7.15656e-05)
bones/105/rotation = Quaternion(0.154324, -0.740758, 0.219727, 0.615777)
bones/107/rotation = Quaternion(-0.069349, -0.0215806, 0.017954, 0.997197)
bones/108/rotation = Quaternion(-0.00826504, 0.176416, 0.982852, -0.0530181)
bones/109/rotation = Quaternion(-0.124498, 0.00182085, -0.0184369, 0.992047)
bones/110/rotation = Quaternion(0.581702, -0.165851, 0.0917167, 0.791015)
bones/111/rotation = Quaternion(0.198085, 0.000994795, -0.0696241, 0.977708)
bones/112/rotation = Quaternion(0.00191924, 0.20053, 0.979635, 0.00992669)
bones/113/rotation = Quaternion(-0.165224, -0.00257819, 0.0183463, 0.986082)
bones/114/rotation = Quaternion(0.53324, 0.169008, -0.0624224, 0.826556)
bones/115/rotation = Quaternion(0.272604, 0.00435642, 0.0694948, 0.959603)

[node name="LeftHandAttachment" parent="starblade_wielder/Armature/Skeleton3D" index="3"]
transform = Transform3D(-0.466243, 0.378952, 0.799383, -0.0467993, -0.912908, 0.405474, 0.883418, 0.151639, 0.443372, 0.260903, 0.927284, -0.0238015)

[node name="SwordTrail3D" type="MeshInstance3D" parent="starblade_wielder/Armature/Skeleton3D/LeftHandAttachment/WeaponSlotLeftHand/WielderSword" index="2"]
sorting_offset = 102.0
material_override = SubResource("StandardMaterial3D_amect")
cast_shadow = 0
script = ExtResource("3_fhqoo")
from_width = 0.6
lifespan = 0.4
scale_texture = false

[node name="AnimationTree" parent="starblade_wielder" index="2"]
callback_mode_process = 0
libraries = {
"": ExtResource("4_np4pt"),
"extra_anims": ExtResource("5_qj00n")
}
parameters/IdleWalkRun_Jump/IdleWalkRunWeaponBlendspace/blend_position = Vector2(0, 0)

[node name="CombatSweepArea" type="Area3D" parent="starblade_wielder"]
transform = Transform3D(-1, 0, 1.50996e-07, 0, 1, 0, -1.50996e-07, 0, -1, 0, 1.05, 0)
collision_layer = 2
collision_mask = 2
monitoring = false
monitorable = false

[node name="CombatSweepShape" type="CollisionShape3D" parent="starblade_wielder/CombatSweepArea"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.124161, -0.592949)
shape = SubResource("BoxShape3D_j0pih")
disabled = true

[node name="PlayerCollisionCapsule" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.0946493, 0)
shape = SubResource("CapsuleShape3D_j7t00")

[node name="SpringArm3D" type="SpringArm3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.966475, 0.256762, 0, -0.256762, 0.966475, 0, 0.372398, 0)
shape = SubResource("SeparationRayShape3D_xx8bg")
spring_length = 4.5

[node name="PlayerCam" type="Camera3D" parent="SpringArm3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.00170732, 5.00357)
cull_mask = 524287
current = true
fov = 60.0

[node name="PostProcessSpatial" type="Node3D" parent="SpringArm3D/PlayerCam"]
visible = false

[node name="Shader" type="MeshInstance3D" parent="SpringArm3D/PlayerCam/PostProcessSpatial"]
transform = Transform3D(1, 0, 0, 0, 0.999914, -0.0128977, 0, 0.0128977, 0.999914, 0, 0.0188149, -0.510084)
cast_shadow = 0
extra_cull_margin = 16384.0
ignore_occlusion_culling = true
mesh = SubResource("QuadMesh_t0qij")
skeleton = NodePath("../..")

[node name="OverlapArea" type="Area3D" parent="."]
collision_layer = 2
collision_mask = 2
monitorable = false

[node name="OverlapShape" type="CollisionShape3D" parent="OverlapArea"]
shape = SubResource("SphereShape3D_x54ob")

[node name="UI" type="Control" parent="."]
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="TargetingIcon" type="Sprite2D" parent="UI"]
visible = false
self_modulate = Color(1, 1, 1, 0.686275)
scale = Vector2(0.1, 0.1)
texture = ExtResource("4_26cl0")

[node name="SpringArmVisualizer" type="CSGSphere3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.966475, 0.256762, 0, -0.256762, 0.966475, 0, 0.976886, 2.98023e-08)
visible = false
radius = 0.05

[node name="SpringArmTarget" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, -1.49012e-08, 0, 1.49012e-08, 1, 0, 0.369434, 2.98023e-08)

[node name="SpringArmJumpTarget" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, -1.49012e-08, 0, 1.49012e-08, 1, 0, -0.339434, 2.98023e-08)

[node name="InvincibilityTimer" type="Timer" parent="."]
process_callback = 0
one_shot = true

[connection signal="body_entered" from="starblade_wielder/Armature/Skeleton3D/LeftHandAttachment/WeaponSlotLeftHand/WielderSword/HitboxArea" to="." method="_on_sword_hitbox_area_body_entered"]
[connection signal="timeout" from="starblade_wielder/Armature/Skeleton3D/LeftHandAttachment/VanishTimer" to="." method="_on_vanish_timer_timeout"]
[connection signal="animation_finished" from="starblade_wielder/AnimationTree" to="." method="_on_animation_tree_animation_finished"]
[connection signal="body_entered" from="starblade_wielder/CombatSweepArea" to="." method="_on_combat_sweep_area_body_entered"]
[connection signal="body_exited" from="starblade_wielder/CombatSweepArea" to="." method="_on_combat_sweep_area_body_exited"]
[connection signal="body_entered" from="OverlapArea" to="." method="_on_overlap_area_body_entered"]
[connection signal="body_exited" from="OverlapArea" to="." method="_on_overlap_area_body_exited"]

[editable path="starblade_wielder"]
[editable path="starblade_wielder/Armature/Skeleton3D/LeftHandAttachment/WeaponSlotLeftHand/WielderSword"]
