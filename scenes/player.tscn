[gd_scene load_steps=11 format=3 uid="uid://cc7svareltvw7"]

[ext_resource type="Script" path="res://scripts/Player.gd" id="1_nm7dn"]
[ext_resource type="Shader" path="res://shaders/celshader_pp1.gdshader" id="3_owgoy"]
[ext_resource type="PackedScene" uid="uid://chyx0ysg0ih0p" path="res://3D_models/characters/wielder1/starblade_wielder.tscn" id="3_qh5ue"]
[ext_resource type="Texture2D" uid="uid://c0k8c5wncmt3g" path="res://UI/Target_Reticle.png" id="4_26cl0"]

[sub_resource type="AnimationNodeStateMachinePlayback" id="AnimationNodeStateMachinePlayback_jffoc"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_j7t00"]
radius = 0.233368
height = 1.9079

[sub_resource type="SeparationRayShape3D" id="SeparationRayShape3D_xx8bg"]
slide_on_slope = true

[sub_resource type="ShaderMaterial" id="ShaderMaterial_yjbfb"]
render_priority = 0
shader = ExtResource("3_owgoy")
shader_parameter/brightness = 1.3
shader_parameter/contrast_multiplier = 0.4
shader_parameter/l_thresh_multiplier = 0.5
shader_parameter/lightshadow_transition = 0.0
shader_parameter/max_distance = 4000.0
shader_parameter/shadow_tint = Color(0.537255, 0.6, 0.709804, 1)
shader_parameter/light_tint = Color(0.831373, 0.831373, 0.831373, 1)

[sub_resource type="QuadMesh" id="QuadMesh_t0qij"]
material = SubResource("ShaderMaterial_yjbfb")
size = Vector2(2, 2)

[sub_resource type="SphereShape3D" id="SphereShape3D_x54ob"]
radius = 9.00683

[node name="Player" type="CharacterBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.058, 0)
collision_layer = 4
collision_mask = 5
script = ExtResource("1_nm7dn")

[node name="starblade_wielder" parent="." instance=ExtResource("3_qh5ue")]
transform = Transform3D(-1, 0, -1.50996e-07, 0, 1, 0, 1.50996e-07, 0, -1, 0, -1.05, 0)

[node name="Skeleton3D" parent="starblade_wielder/Armature" index="0"]
bones/1/position = Vector3(0.00495408, 0.0391357, 0.827233)
bones/1/rotation = Quaternion(0.790375, -0.027407, -0.00598619, 0.611981)
bones/2/rotation = Quaternion(-0.104437, 0.0232062, -0.0166093, 0.994122)
bones/3/rotation = Quaternion(-0.0528155, -2.3058e-05, -0.000946644, 0.998604)
bones/4/rotation = Quaternion(0.0123372, 8.01359e-05, -0.00162553, 0.999923)
bones/6/rotation = Quaternion(-0.18542, -0.0261685, 0.0127453, 0.982228)
bones/63/rotation = Quaternion(-0.592004, 0.214517, -0.122406, 0.767158)
bones/64/rotation = Quaternion(-0.051166, 0.110977, -0.226671, 0.966275)
bones/65/rotation = Quaternion(0.13573, -0.01841, 0.116846, 0.983659)
bones/66/position = Vector3(-0.0280875, 0.233895, 0.00480446)
bones/66/rotation = Quaternion(0.0267887, -0.14958, 0.141064, 0.978268)
bones/70/position = Vector3(-0.0148678, 0.24068, 0.0140271)
bones/70/rotation = Quaternion(0.0275291, -0.0853057, 0.127648, 0.987761)
bones/74/position = Vector3(0.000382902, 0.245437, 0.0171594)
bones/74/rotation = Quaternion(0.066279, -0.0612469, 0.10908, 0.989928)
bones/78/position = Vector3(0.0137057, 0.246622, 0.0165239)
bones/78/rotation = Quaternion(0.0767145, 0.0535181, 0.0481889, 0.994449)
bones/82/position = Vector3(0.0212094, 0.226581, -0.000600029)
bones/82/rotation = Quaternion(0.200396, 0.784606, -0.216563, 0.545285)
bones/86/rotation = Quaternion(-0.597015, -0.20312, 0.133324, 0.764552)
bones/87/rotation = Quaternion(-0.0565578, -0.083607, 0.200705, 0.974438)
bones/88/rotation = Quaternion(0.0822958, 0.058253, -0.0971604, 0.990148)
bones/89/position = Vector3(0.0268996, 0.235491, -0.000364935)
bones/89/rotation = Quaternion(-0.03063, 0.184812, -0.123168, 0.974544)
bones/93/position = Vector3(0.0140986, 0.242546, 0.00927631)
bones/93/rotation = Quaternion(-0.0280743, 0.121774, -0.106454, 0.986433)
bones/97/position = Vector3(-0.00107696, 0.246885, 0.0132798)
bones/97/rotation = Quaternion(0.0119049, 0.0997914, -0.0883553, 0.991006)
bones/101/position = Vector3(-0.0145009, 0.247392, 0.0137404)
bones/101/rotation = Quaternion(0.0277368, -0.0112786, -0.0223905, 0.999301)
bones/105/position = Vector3(-0.0221765, 0.225521, -0.00070576)
bones/105/rotation = Quaternion(0.203545, -0.743638, 0.259943, 0.581379)
bones/108/rotation = Quaternion(0.0144374, 0.169343, 0.985209, -0.0218576)
bones/109/rotation = Quaternion(-0.00220044, -0.000448304, -0.0185212, 0.999826)
bones/110/rotation = Quaternion(0.484822, -0.153505, 0.0977646, 0.855469)
bones/111/rotation = Quaternion(0.198492, 0.000965834, -0.0696245, 0.977626)
bones/112/rotation = Quaternion(0.0297419, 0.158656, 0.985586, 0.0506336)
bones/113/rotation = Quaternion(-0.126193, -0.0018524, 0.0184337, 0.991833)
bones/114/rotation = Quaternion(0.583534, 0.132892, -0.0560581, 0.799178)
bones/115/rotation = Quaternion(0.218918, 0.00049216, 0.0696294, 0.973256)

[node name="LeftHandAttachment" parent="starblade_wielder/Armature/Skeleton3D" index="3"]
transform = Transform3D(-0.345387, 0.314514, 0.884188, 0.000590549, -0.942096, 0.335343, 0.93846, 0.116345, 0.325202, 0.259755, 0.926351, -0.0269415)

[node name="Wielder1_Sword2" parent="starblade_wielder/Armature/Skeleton3D/LeftHandAttachment/WeaponSlotLeftHand" index="0"]
visible = true

[node name="AnimationTree" parent="starblade_wielder" index="2"]
parameters/IdleWalkRun_Jump/playback = SubResource("AnimationNodeStateMachinePlayback_jffoc")

[node name="PlayerCollisionCapsule" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.0946493, 0)
shape = SubResource("CapsuleShape3D_j7t00")

[node name="SpringArm3D" type="SpringArm3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.966475, 0.256762, 0, -0.256762, 0.966475, 0, 0.372398, 0)
shape = SubResource("SeparationRayShape3D_xx8bg")
spring_length = 4.0

[node name="PlayerCam" type="Camera3D" parent="SpringArm3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.00170732, 5.00357)
cull_mask = 524287
fov = 60.0

[node name="PostProcessSpatial" type="Node3D" parent="SpringArm3D/PlayerCam"]
visible = false

[node name="Shader" type="MeshInstance3D" parent="SpringArm3D/PlayerCam/PostProcessSpatial"]
transform = Transform3D(1, 0, 0, 0, 0.999914, -0.0128977, 0, 0.0128977, 0.999914, 0, 0.0188149, -0.510084)
cast_shadow = 0
extra_cull_margin = 16384.0
ignore_occlusion_culling = true
mesh = SubResource("QuadMesh_t0qij")
skeleton = NodePath("../..")

[node name="OverlapArea" type="Area3D" parent="."]
collision_layer = 2
collision_mask = 2

[node name="OverlapShape" type="CollisionShape3D" parent="OverlapArea"]
shape = SubResource("SphereShape3D_x54ob")

[node name="UI" type="Control" parent="."]
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="TargetingIcon" type="TextureRect" parent="UI"]
visible = false
self_modulate = Color(1, 1, 1, 0.686275)
layout_mode = 1
offset_right = 47.0
offset_bottom = 47.0
texture = ExtResource("4_26cl0")
expand_mode = 1

[connection signal="timeout" from="starblade_wielder/Armature/Skeleton3D/LeftHandAttachment/VanishTimer" to="." method="_on_vanish_timer_timeout"]
[connection signal="animation_finished" from="starblade_wielder/AnimationTree" to="." method="_on_animation_tree_animation_finished"]
[connection signal="area_shape_entered" from="OverlapArea" to="." method="_on_overlap_area_area_shape_entered"]
[connection signal="area_shape_exited" from="OverlapArea" to="." method="_on_overlap_area_area_shape_exited"]
[connection signal="body_shape_entered" from="OverlapArea" to="." method="_on_overlap_area_body_shape_entered"]
[connection signal="body_shape_exited" from="OverlapArea" to="." method="_on_overlap_area_body_shape_exited"]

[editable path="starblade_wielder"]
