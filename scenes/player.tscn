[gd_scene load_steps=10 format=3 uid="uid://bueuj0ghwdj2c"]

[ext_resource type="Script" path="res://scripts/Player.gd" id="1_nm7dn"]
[ext_resource type="PackedScene" uid="uid://dsntrswipiq46" path="res://3D_models/characters/other/hooded_character.tscn" id="2_jk2g5"]
[ext_resource type="Shader" path="res://shaders/celshader_pp1.gdshader" id="3_owgoy"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_j7t00"]
radius = 0.277379
height = 2.18201

[sub_resource type="AnimationNodeStateMachinePlayback" id="AnimationNodeStateMachinePlayback_1iq4j"]

[sub_resource type="SeparationRayShape3D" id="SeparationRayShape3D_xx8bg"]
slide_on_slope = true

[sub_resource type="ShaderMaterial" id="ShaderMaterial_yjbfb"]
render_priority = 0
shader = ExtResource("3_owgoy")
shader_parameter/brightness = 1.35
shader_parameter/contrast_multiplier = 0.5
shader_parameter/l_thresh_multiplier = 0.5
shader_parameter/lightshadow_transition = 0.0
shader_parameter/max_distance = 4000.0
shader_parameter/shadow_tint = Color(0.537255, 0.6, 0.709804, 1)
shader_parameter/light_tint = Color(0.831373, 0.831373, 0.831373, 1)

[sub_resource type="QuadMesh" id="QuadMesh_t0qij"]
material = SubResource("ShaderMaterial_yjbfb")
size = Vector2(2, 2)

[sub_resource type="SphereShape3D" id="SphereShape3D_x54ob"]
radius = 2.933

[node name="Player" type="CharacterBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.058, 0)
collision_mask = 3
script = ExtResource("1_nm7dn")

[node name="PlayerCollisionCapsule" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.0353781, 0)
shape = SubResource("CapsuleShape3D_j7t00")

[node name="hooded_character" parent="." instance=ExtResource("2_jk2g5")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1.05269, 0)

[node name="Skeleton3D" parent="hooded_character/HoodedCharacterGameRig" index="0"]
bones/0/position = Vector3(0.0428489, 1.09427, -0.0345059)
bones/0/rotation = Quaternion(0.997247, -0.021007, 0.0481215, -0.0523546)
bones/2/position = Vector3(0.206737, -0.927, 0.179799)
bones/2/rotation = Quaternion(0.165296, 0.659879, 0.712878, -0.170418)
bones/3/rotation = Quaternion(-0.0224125, 0.999585, -0.00559003, 0.0172434)
bones/10/rotation = Quaternion(0.720937, 0.179106, 0.664866, 0.0782558)
bones/11/rotation = Quaternion(-3.91272e-07, -0.0551029, -4.09071e-08, 0.998481)
bones/12/rotation = Quaternion(1.98347e-07, 0.0282634, 3.24654e-07, 0.999601)
bones/13/position = Vector3(-0.00909413, -0.941178, 0.0852179)
bones/13/rotation = Quaternion(-0.180399, 0.636518, 0.743815, 0.0950774)
bones/21/rotation = Quaternion(0.731801, -0.0234612, -0.676511, 0.0790593)
bones/22/rotation = Quaternion(-1.75764e-07, 0.166367, -3.07726e-08, 0.986064)
bones/23/rotation = Quaternion(5.36332e-08, -0.0834681, 5.88353e-08, 0.99651)
bones/24/position = Vector3(0.0428489, 1.09427, -0.0345059)
bones/24/rotation = Quaternion(0.111138, -0.043543, -0.00525273, 0.992837)
bones/25/position = Vector3(0.0429087, 1.15735, -0.0201615)
bones/25/rotation = Quaternion(-0.00312253, -0.0346915, 0.0169122, 0.99925)
bones/26/position = Vector3(0.0354947, 1.37862, -0.0217687)
bones/26/rotation = Quaternion(0.0161567, -0.026951, 0.0447915, 0.998502)
bones/31/rotation = Quaternion(0.536856, 0.391375, 0.654974, -0.360028)
bones/32/rotation = Quaternion(-0.411512, 0.421726, -0.254188, 0.766937)
bones/33/rotation = Quaternion(2.16483e-07, 0.177427, 3.95647e-08, 0.984134)
bones/34/rotation = Quaternion(9.57162e-09, 0.177664, -6.49118e-07, 0.984091)
bones/35/rotation = Quaternion(0.0726964, -0.00204978, -0.0299636, 0.996902)
bones/36/rotation = Quaternion(-1.9526e-08, -0.681651, 7.22768e-08, 0.731677)
bones/37/rotation = Quaternion(1.32658e-08, -0.0640945, -1.24238e-07, 0.997944)
bones/38/rotation = Quaternion(0.143554, -0.0271754, -0.102001, 0.983997)
bones/40/rotation = Quaternion(-0.31391, 0.110208, -0.0656479, 0.940747)
bones/41/rotation = Quaternion(-0.258788, 0.0175441, -0.057826, 0.964042)
bones/44/rotation = Quaternion(-0.275431, 0.0263354, 0.0212922, 0.960724)
bones/45/rotation = Quaternion(-0.244473, -0.00122996, -0.0517663, 0.968273)
bones/48/rotation = Quaternion(-0.167136, -0.026802, 0.137763, 0.975894)
bones/49/rotation = Quaternion(-0.274411, -0.00043507, -0.0180518, 0.961443)
bones/52/rotation = Quaternion(-0.197039, -0.124204, 0.250742, 0.939616)
bones/53/rotation = Quaternion(-0.189708, -0.0127138, 0.0199656, 0.981555)
bones/58/rotation = Quaternion(-0.543289, 0.396348, 0.628518, 0.390781)
bones/59/rotation = Quaternion(-0.428736, -0.437742, 0.197862, 0.765126)
bones/60/rotation = Quaternion(4.73534e-08, -0.211729, 9.44757e-08, 0.977329)
bones/61/rotation = Quaternion(8.01716e-09, -0.211729, 6.24878e-08, 0.977329)
bones/62/rotation = Quaternion(0.0956, 0.00223763, 0.0347343, 0.994811)
bones/63/rotation = Quaternion(3.12977e-08, 0.716977, 6.46911e-08, 0.697097)
bones/64/rotation = Quaternion(-2.17622e-09, 0.113338, -3.78847e-08, 0.993556)
bones/65/rotation = Quaternion(0.228717, 0.0473458, 0.0941112, 0.967776)
bones/67/rotation = Quaternion(-0.23086, -0.0597955, 0.101082, 0.965873)
bones/68/rotation = Quaternion(-0.182507, -0.00577411, 0.0620224, 0.981229)
bones/71/rotation = Quaternion(-0.221905, -0.00769113, -0.00271503, 0.975034)
bones/72/rotation = Quaternion(-0.169144, 0.00436733, 0.0503931, 0.984293)
bones/75/rotation = Quaternion(-0.177633, 0.0209416, -0.13271, 0.974883)
bones/76/rotation = Quaternion(-0.182785, 0.00290664, 0.0143261, 0.983044)
bones/79/rotation = Quaternion(-0.167917, 0.111796, -0.218767, 0.954697)
bones/80/rotation = Quaternion(-0.103297, 0.00813667, -0.0143511, 0.994514)
bones/85/position = Vector3(0.00763527, 1.69478, -0.027191)
bones/85/rotation = Quaternion(0.107905, -0.0229992, 0.0302849, 0.993434)
bones/86/rotation = Quaternion(-0.0914705, -0.000508351, 0.00287551, 0.995804)
bones/87/position = Vector3(0.165233, 0.561421, 0.0759285)
bones/87/rotation = Quaternion(0.74264, 0.00376446, 0.668808, -0.034177)
bones/88/rotation = Quaternion(1.24102e-08, -0.13575, -6.23399e-09, 0.990743)
bones/90/rotation = Quaternion(-2.43865e-09, -0.0675439, 1.17911e-07, 0.997716)
bones/91/position = Vector3(-0.0537504, 0.556475, -0.0278133)
bones/91/rotation = Quaternion(0.860697, 0.0520572, -0.506363, -0.00936285)
bones/92/rotation = Quaternion(-1.25456e-08, -0.0033318, 3.94949e-08, 0.999995)
bones/94/rotation = Quaternion(6.28931e-07, -0.00166747, -1.20023e-06, 0.999999)
bones/95/position = Vector3(0.000463685, 1.80648, -0.0135026)
bones/95/rotation = Quaternion(-0.0641849, -0.0183936, -0.0155904, 0.997647)
bones/110/rotation = Quaternion(0.707155, -9.23233e-06, 0.707059, 1.38357e-07)

[node name="RightHandAttachment" type="BoneAttachment3D" parent="hooded_character/HoodedCharacterGameRig/Skeleton3D" index="1"]
transform = Transform3D(-0.0273462, -0.424565, -0.904984, -0.209943, -0.882692, 0.420451, -0.977331, 0.201493, -0.0649963, -0.21083, 0.922615, -0.0698552)
bone_name = "hand.r"
bone_idx = 65

[node name="WeaponSlot" type="Node3D" parent="hooded_character/HoodedCharacterGameRig/Skeleton3D/RightHandAttachment"]
transform = Transform3D(-0.0457613, -0.99403, 0.0990571, 0.894667, 0.00332996, 0.446723, -0.444386, 0.109067, 0.889172, 0.0112015, 0.08489, -0.0213568)

[node name="VanishTimer" type="Timer" parent="hooded_character/HoodedCharacterGameRig/Skeleton3D/RightHandAttachment"]
one_shot = true

[node name="AnimationTree" parent="hooded_character" index="2"]
parameters/IdleWalkRun/blend_position = 0.0
parameters/StateMachine/playback = SubResource("AnimationNodeStateMachinePlayback_1iq4j")

[node name="SpringArm3D" type="SpringArm3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.966475, 0.256762, 0, -0.256762, 0.966475, 0, 0, 0)
shape = SubResource("SeparationRayShape3D_xx8bg")
spring_length = 8.0

[node name="PlayerCam" type="Camera3D" parent="SpringArm3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 8)
cull_mask = 524287
fov = 60.0

[node name="PostProcessSpatial" type="Node3D" parent="SpringArm3D/PlayerCam"]
visible = false

[node name="Shader" type="MeshInstance3D" parent="SpringArm3D/PlayerCam/PostProcessSpatial"]
transform = Transform3D(1, 0, 0, 0, 0.999914, -0.0128977, 0, 0.0128977, 0.999914, 0, 0.0188149, -0.510084)
cast_shadow = 0
extra_cull_margin = 16384.0
ignore_occlusion_culling = true
mesh = SubResource("QuadMesh_t0qij")
skeleton = NodePath("../..")

[node name="OverlapArea" type="Area3D" parent="."]
collision_layer = 2
collision_mask = 2

[node name="OverlapShape" type="CollisionShape3D" parent="OverlapArea"]
shape = SubResource("SphereShape3D_x54ob")

[connection signal="timeout" from="hooded_character/HoodedCharacterGameRig/Skeleton3D/RightHandAttachment/VanishTimer" to="." method="_on_vanish_timer_timeout"]
[connection signal="area_shape_entered" from="OverlapArea" to="." method="_on_overlap_area_area_shape_entered"]
[connection signal="area_shape_exited" from="OverlapArea" to="." method="_on_overlap_area_area_shape_exited"]

[editable path="hooded_character"]
